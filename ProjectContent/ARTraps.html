<style>
    .overlays
    {
        position:absolute;

        z-index:300000;

        pointer-events: none; 
    }
</style>


<br>
<h2>AR Traps    <i style ="font-size: 75%">-    October Berlin Minijam</i></h2>
<br>
<h1 style="color:red">Not properly implemented!</h1>
<h3>Overview</h3>
<p>
An AR Evperienced made in about four hours! We were given 8 hours of time but some 
At the October Berlin Minijam I wanted to try something completely new to me. After talking to some people I knew from other Jams and some new faces I quickly found myself in a team which wanted to do something in AR.
We needed a lot of time to agree on a Game Design. 
<br> 
The difficulty we had was, that most of our ideas were too ambitious. After losing nearly half of our team we hurried up and tried to at least get something working. 
We decided to spawn virtual traps into the real world. The player has to reach the other end of the room without getting hit.
<br> <br>
</p>

<!-- <div style = "text-align: center;">
    <video id="vid1" onclick="SwitchPlay('vid1')" type="video/x-webm" src="Media/ARTraps/ARPERSIA.webm" style = " width:25%; height: 25%"></video>
</div> -->


<button onclick="SetMiddlePosition()">TEST</button>
<br>

    <div class="overlays"><i id="vid1_o" class="fa fa-fw fa-play" style="font-size:120px; color:white;"></i></div>
        <video class="videos" id="vid1" onclick="SwitchPlay('vid1');" type="video/x-webm" src="Media/ARTraps/ARPERSIA.webm" style = " width:25%; height: 25%;"></video>
<br>
        <div class="overlays"><i id="vid2_o" class="fa fa-fw fa-play" style="font-size:120px; color:white;"></i></div>
        <video class="videos" id="vid2" onclick="SwitchPlay('vid1');" type="video/x-webm" src="Media/ARTraps/ARPERSIA.webm" style = " width:35%; height: 25%;"></video>


            

<br>
<br> <br>

<h3 id="howWeDidIt">How we did it</h3>
<p>
Since two of us were somewhat experienced with AR they worked on the implementation of the Vuforia framework. We used an image target - a specific image we printed out and laid on the floor. As soon as the program recognizes the image it can project the 3D Models into the real space. A system called 'extended tracking' enabled us to keep the location of the Models accurate even after the image target is out of view.

My task was to design and programm all of the traps. I wrote three scripts to move the traps in different ways. Since we weren't sure whether or not we would have time to build on top of the current minimalistic concept, I decided to write one script in a very versatile way. 

We could've used it for various things, but due to time constraints, we only used it for the two walls trying to crush the player in between themselves.
<br> <br>
</p>
<h3 id="additionalTraps">Addition Traps</h3>

<p>

To prove that my scripts could be used in different ways, I quickly created the following example traps:

FloorBlades
FloorBlades
Flying Spears
Flying Spears
SpinningBlades2
SpinningBlades2


I created a shader to hide the blades (shown on the left) if they are below a certain point. Now they can be used in AR :)



Github:

https://github.com/RameshBettge/AR_Floor



Tools used:

Vuforia

Dungeon Traps Assets (https://assetstore.unity.com/packages/3d/environments/dungeons/dungeon-traps-50655)
</p>    


<script type="text/javascript" src="https://code.jquery.com/jquery-1.5.1.min.js"></script>
<script>

    var isPlaying = {};


    function SwitchPlay(name)
    {
        var vid = document.getElementById(name);
        if(!isPlaying[vid] || vid.ended)
        {
            vid.play();    
            isPlaying[vid] = true;
        }
        else
        {
            vid.pause();
            isPlaying[vid] = false;
        }
    }

    function SetMiddlePosition() //  unfunctional!
    {
        // var vid = document.getElementById(name);
        // var play = document.getElementById(name + "_o");

        console.log("setting middle pos");

        var vids = document.getElementsByClassName("videos");
        var plays = document.getElementsByClassName("overlays");

        for(var i = 0; i < vids.length; i++)
        {
            var vid = vids[i];
            var play = plays[i];

            console.log(vid.id);

            // Calculate X Offset
            var width = parseFloat( $(vid).css('width') );
            console.log("vid: " + width);
            var width = width * 0.5;
            var playWidth = parseFloat( $(play).css('width') );
            console.log("play: " + playWidth);
            width = width - (playWidth * 0.5);
            console.log("offset: " + width)
            var xOffset = parseFloat(width)/2 + 'px';

            // Calculate Y Offset
            var height = parseFloat( $(vid).css('height') );
            var height = height * 0.5;
            var playheight = parseFloat( $(play).css('height') );
            height = height - (playheight * 0.5);
            var yOffset = height/2 + 'px';


            // Apply Offsets
            $(play).css('margin-left', xOffset);
            $(play).css('margin-top', yOffset);

            console.log(xOffset);
        }
    }

</script>